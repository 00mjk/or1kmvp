 ##############################################################################
 #                                                                            #
 # Copyright 2018 Jan Henrik Weinstock                                        #
 #                                                                            #
 # Licensed under the Apache License, Version 2.0 (the "License");            #
 # you may not use this file except in compliance with the License.           #
 # You may obtain a copy of the License at                                    #
 #                                                                            #
 #     http://www.apache.org/licenses/LICENSE-2.0                             #
 #                                                                            #
 # Unless required by applicable law or agreed to in writing, software        #
 # distributed under the License is distributed on an "AS IS" BASIS,          #
 # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.   #
 # See the License for the specific language governing permissions and        #
 # limitations under the License.                                             #
 #                                                                            #
 ##############################################################################

 ### General configuration ####################################################

# Specify the number of processors to instantiate in the simulation. Maximum
# allowed is 32. Override this on command line using -c system.nrcpus=X.
system.nrcpu = 2

# Specify simulation duration. Simulation will stop automatically once this
# time-stamp is reached. Use integer values with suffixes s, ms, us or ns. If
# you want to simulate infinitely, leave this commented out.
#  system.duration = 2s

# TLM global quantum, a higher value improves performance but reduces timing
# accuracy. Use integer values with suffixes s, ms, us or ns.
system.quantum  = 5us


 ### Memory and IO peripherals configuration ##################################

# Bus memory map
system.mem   = 0x00000000 0x07ffffff
system.uart  = 0x90000000 0x90001fff
system.ompic = 0x98000000 0x98001fff

# Memory configuration
system.mem.size = 0x08000000    # 128MB
system.mem.images = $dir/../sw/vmlinux-4.3.0 @ 0x0

# UART configuration
system.uart.backend = term
#  system.uart.virtio = console|xterm|stdout|file|tcp|null
#  system.uart.rx = uart.rx     # use with virtio = file
#  system.uart.tx = uart.tx     # use with virtio = file
#  system.uart.port = 44444     # use with virtio = tcp


 ### Per-CPU configuration ####################################################

system.cpu0.symbols  = $dir/../sw/vmlinux-4.3.0.elf
system.cpu0.gdb_port = 55100
system.cpu0.gdb_wait = 0

# system.cpu0.enable_decode_cache = 0
# system.cpu0.enable_sleep_mode = 0
# system.cpu0.enable_insn_dmi = 0
# system.cpu0.enable_data_dmi = 0
# system.cpu0.irq_mpic = 1
# system.cpu0.irq_uart = 2
# system.cpu0.irq_eth = 4
# system.cpu0.irq_kb = 5

system.cpu1.symbols  = $dir/../sw/vmlinux-4.3.0.elf
system.cpu1.gdb_port = 55101
system.cpu1.gdb_wait = 0

# system.cpu1.enable_decode_cache = 0
# system.cpu1.enable_sleep_mode = 0
# system.cpu1.enable_insn_dmi = 0
# system.cpu1.enable_data_dmi = 0
# system.cpu1.irq_mpic = 1
# system.cpu1.irq_uart = 2
# system.cpu1.irq_eth = 4
# system.cpu1.irq_kb = 5
